{% extends 'gl4app/base.html' %}
{% load i18n crispy_forms_tags %}

{% block title %}{% trans 'Marbles and Granites from around the globe' %}{% endblock %}

{% block title2 %}{% trans 'Marbles and Granites from around the globe' %}{% endblock %}

{% block description %}{% trans 'Information on granite and marble from around the world, including data and pictures of thousands of natural stones, at the Graniteland online stone database.' %}{% endblock %}

{% block head %}{% endblock %}

{% block body_classes %}stones-home{% endblock %}

{% block breadcrumb %}
<a href="{% url 'stonedb_home' %}">{% trans 'Stones' %}</a> &raquo;
{% endblock %}

{% block main %}

<h1>{% trans 'Marbles and Granites from around the globe' %}</h1>

<div class="stones-home-content">
  <section class="stones-home-search">
    {% crispy form %}
    <div class="stones-home-result"></div>
  </section>

  <section class="stones-home-ad1">
    {% if settings.PRODUCTION %}
      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <!-- gc resp atf stone search form -->
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-0795994016573783" data-ad-slot="4715830441" data-ad-format="auto"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    {% else %}
      <div style="width: 350px; height: 300px; background: #EEE;"></div>
    {% endif %}
  </section>
</div>

<table class="layout2">
  <tr>
    <td class="leftcol">
      <h2><a href="/stone/color">{% trans 'Natural stone by color' %}:</a></h2>
      <ul>
        <li><a href="/stone/color/beige">Beige natural stone</a></li>
        <li><a href="/stone/color/black">Black natural stone</a></li>
        <li><a href="/stone/color/blue">Blue natural stone</a></li>
        <li><a href="/stone/color/brown">Brown natural stone</a></li>
        <li><a href="/stone/color/colorfull">Colorfull natural stone</a></li>
        <li><a href="/stone/color/darkgrey">Dark grey natural stone</a></li>
        <li><a href="/stone/color/green">Green natural stone</a></li>
        <li><a href="/stone/color/grey">Grey natural stone</a></li>
        <li><a href="/stone/color/lightgrey">Light grey natural stone</a></li>
        <li><a href="/stone/color/pink">Pink natural stone</a></li>
        <li><a href="/stone/color/red">Red natural stone</a></li>
        <li><a href="/stone/color/white">White natural stone</a></li>
        <li><a href="/stone/color/yellow">Yellow natural stone</a></li>
      </ul>
    </td>
    <td class="middlecol">
      <h2><a href="/stone/country">{% trans 'Natural stone by country of origin' %}:</a></h2>
      <ul>
        <li><a href="/stone/country/brazil">Natural Stones from Brazil</a></li>
        <li><a href="/stone/country/china">Natural Stones from China</a></li>
        <li><a href="/stone/country/germany">Natural Stones from Germany</a></li>
        <li><a href="/stone/country/france">Natural Stones from France</a></li>
        <li><a href="/stone/country/greece">Natural Stones from Greece</a></li>
        <li><a href="/stone/country/india">Natural Stones from India</a></li>
        <li><a href="/stone/country/italy">Natural Stones from Italy</a></li>
        <li><a href="/stone/country/mexico">Natural Stones from Mexico</a></li>
        <li><a href="/stone/country/austria">Natural Stones from Austria</a></li>
        <li><a href="/stone/country/switzerland">Natural Stones from Switzerland</a></li>
        <li><a href="/stone/country/spain">Natural Stones from Spain</a></li>
      </ul>
    </td>
    <td class="rightcol">
      <h2><a href="/stone/type">{% trans 'Natural stone by classification' %}:</a></h2>
      <ul>
        <li><a href="/stone/type/granite">Granite</a></li>
        <li><a href="/stone/type/marble">Marble</a></li>
        <li><a href="/stone/type/limestone">Limestone</a></li>
        <li><a href="/stone/type/sandstone">Sandstone</a></li>
        <li><a href="/stone/type/slate">Slate</a></li>
        <li><a href="/stone/type/basalt">Basalt</a></li>
        <li><a href="/stone/type/lava">Lava</a></li>
        <li><a href="/stone/type/quartzite">Quartzite</a></li>
        <li><a href="/stone/type/travertine">Travertine</a></li>
        <li><a href="/stone/type/tuff">Tuff</a></li>
        <li><a href="/stone/type/soapstone">Soapstone</a></li>
      </ul>
    </td>
  </tr>
</table>
<div style="clear: both;"></div>

{% if settings.PRODUCTION %}
<div style="margin: 0; padding: 15px 0; text-align: center; border-top: 1px solid #ccc;" class="ad">
  <script type="text/javascript"><!--
google_ad_client = "pub-0795994016573783";
/* graniteland.de 468x15 page */
google_ad_slot = "8449596167";
google_ad_width = 468;
google_ad_height = 15;
//--></script>
  <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
{% endif %}

{% endblock main %}

{% block foot %}

<script>
(function () {
  var h = window.location.hash.replace(/^#/, '');
  $('#id_stone-pseu-form input[name="q"]').val(h)
  if (h.length >= 3) searchResults(h);

  $('#id_stone-pseu-form').on('submit', function (ev) {
    var _this = this;
    ev.preventDefault(); ev.stopPropagation();
    window.location.hash = $(_this).find('input[name="q"]').val();
  });

  $('#id_stone-pseu-form input[name="q"]').on('keyup', function (ev) {
    var _this = this;
    if (_this.value.length < 3) return;
    searchResults(_this.value);
  });

  function searchResults (q) {
    var oResult = $('.stones-home-result');
    oResult.html('<div class="loading"><span></span><span></span><span></span></div>');

    $.get("{% url 'stonedb_api_search' %}", { q: q }, function (response) {
      oResult.html('');
      if (response.items) {
        for (var i=0; i<response.items.length; i++) {
          var pseu = (response.items[i]['name'] == response.items[i]['pseu']) ? ' ' : ' <span class="pseu">(' + response.items[i]['pseu'] + ')</span> ';
          var name = ' <span class="name">' + response.items[i]['name'] + '</span> ';
          var bgimg = ' style="background-image: url(' + response.items[i]['pic'] + ')" ';
          oResult.append('<a href="' + response.items[i]['url'] + '"' + bgimg + '><span>' + name + pseu + '</span></a>');
        }
      }
    });
  }
})();
</script>

{% endblock %}
